<section class="testimonial sections" id="testimonial">
	<h2 class="text-2xl font-title font-semibold text-primary mb-16">Avis des apprenants</h2>

	{% if averageRating > 0 %}
		<div class="mb-3">
			<strong>Note moyenne:</strong>
			<div class="col-md-6">
				{% include "_partials/_rating.html.twig" with {'rating': averageRating } %}
				<br>
				<small>(Calcul√©e sur
					{{ reviews|length }}
					avis)</small>
			</div>
		</div>
	{% endif %}


	{% if reviews|length > 0 %}
		<div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
			<div class="carousel-inner">
				{% for review in reviews %}
					<div class="carousel-item {% if loop.first %}active{% endif %}">
						<div class="stars text-center mb-3">
							{% include "_partials/_rating.html.twig" with {'rating': review.rating } %}
						</div>
						<blockquote class="fst-italic">{{ review.comment }}</blockquote>
						<div class="row">
							<div class="text-start">
								<strong>{{ review.user}}</strong>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
	{% else %}
		<div class="alert alert-info" role="alert">
			Aucun avis pour le moment.
		</div>
	{% endif %}
	<div class="add-review">
		<a href="{{ path('home_notice') }}" class="btn-fill text-center text-decoration-none fs-3 text-lg-start bg-dark">Donnez votre avis</a>
	</div>
</section>
{% block importmap %}
	{# do NOT call parent() #}

	{{ importmap(['app',  'stars']) }}
{% endblock %}
